(function(){var t,e,i;$(function(){var t,i,r,s,o,n,a;for(o={},t=$("div.ec-auto-form"),n=0,a=t.length;a>n;n++)r=t[n],s=new e(r),s.makeRowForm("span"),s.makeItemForm("p"),(i=s.getCheckRules())&&(o=$.extend({},o,i)),$(r).removeClass("ec-auto-form");return $("form").validate({ignore:[],rules:o,highlight:function(t){return $(t).closest(".form-check-item").addClass("has-error"),"bootstrap-drop hide"===$(t).attr("class")?$(t).closest(".dropdown").find("button").attr("style","color:#933132"):void 0},unhighlight:function(t){return $(t).closest(".form-check-item").removeClass("has-error"),"bootstrap-drop hide"===$(t).attr("class")?$(t).closest(".dropdown").find("button").removeAttr("style"):void 0},errorElement:"span",errorClass:"help-block",errorPlacement:function(t,e){return t.insertAfter(e.parents(".form-inline").length?e.parents(".form-inline")[0]:e.parent(".input-group").length?e.parent():e)},invalidHandler:function(t,e){var i;return e.numberOfInvalids()&&(i=e.errorList[0].element,"bootstrap-drop hide"===$(i).attr("class"))?$(i).closest(".dropdown").find("button").focus():void 0}}),$.validator.addMethod("ec_code",function(t){return t.match(/[^A-Za-z0-9_-]/g)?!1:!0},"영숫자를 입력하세요.(_-포함가능)"),t.on("click",".dropdown-menu li",function(t){var e;return e=$(t.currentTarget),e.closest(".dropdown").find('[data-bind="label"]').text(e.text()).end().children(".dropdown-toggle").dropdown("toggle"),e.closest(".dropdown").find("input").val(e.attr("key")),e.closest(".dropdown").find("input").focusout()})}),i=function(){function e(e){var i,r;i=e,this.FormUtil=new t,this.type="",this.id="",this.val="",this.size="",this.option="",this["default"]="",this.hint="",this.target="",this.mark="",this.rows="",this.src="",this.alt="",(r=i.attr("type"))&&(this.type=r),(r=i.attr("id"))&&(this.id=r),(r=i.attr("val"))&&(this.val=r),(r=i.attr("size"))&&(this.size=r),(r=i.attr("default"))&&(this["default"]=r),(r=i.attr("hint"))&&(this.hint=r),(r=i.attr("target"))&&(this.target=r),(r=i.attr("option"))&&(this.option=r),(r=i.attr("mark"))&&(this.mark=r),(r=i.attr("rows"))&&(this.rows=r),(r=i.attr("src"))&&(this.src=r),(r=i.attr("alt"))&&(this.alt=r),this._checkPram(i)}return e.prototype._checkPram=function(t){var e,i;try{if(i=t.context.outerHTML,!this.type)throw"INPUTBOX를 생성할 TYPE이 지정되지 않았습니다."+i;if(!this.id)throw"INPUTBOX를 생성할 ID가 지정되지 않았습니다."+i;if("validator"===this.type)return!1;if("select"===this.type||"radio"===this.type||"check"===this.type){if(!this.option)throw this.type+" BOX를 생성할 OPTION이 지정되지 않았습니다.";if(this.option=this.FormUtil.convJSON(this.option),this.selected=this.option[Object.keys(this.option)[0]],"object"==typeof this.selected)throw this.type+" BOX OPTION의 JSON형식에 오브젝트배열이 있습니다. :"}if("check"===this.type&&(this["default"]&&(this.checked=this.FormUtil.convJSON(this["default"])),this.val))return this.checked=this.FormUtil.convJSON(this.val)}catch(r){throw e=r,"자동완성입력폼 TAG : "+e.toString()}},e.prototype.getTextBox=function(){var t;return t="",t+='<input id="'+this.id+'" name="'+this.id+'" value="'+this.val+'" type="text" ',this.size&&(t+=' size="'+this.size+'"'),t+=' class="form-control" placeholder="'+this.hint+'" >',this.mark?(t='<span class="input-group-addon">'+this.mark+"</span>"+t,t='<div class="input-group input-group-sm">'+t+"</div>"):t='<div class="input-group-sm">'+t+"</div>",t},e.prototype.getDropDownBox=function(){var t,e,i,r,s,o,n;s="",e="",i="",r=this.selected,this.val?i=this.val:(i=this["default"],r=this.option[i]),n=this.option;for(t in n)o=n[t],e+='<li key="'+t+'"><a href="#0">'+o+"</a></li>";return s+='<div class="dropdown">',s+='<button class="btn btn-default btn-sm dropdown-toggle " type="button" data-toggle="dropdown">',s+='<span data-bind="label">'+r+'</span><span class="caret"></span></button>',s+='<ul class="dropdown-menu" role="menu">'+e+"</ul>",s+='<input type="text" id="'+this.id+'" class="bootstrap-drop hide" name="'+this.id+'" value="'+i+'"/></div>',s='<div class="form-group"><div class="input-group input-group-sm" >'+s+"</div></div>"},e.prototype.getSelectBox=function(){var t,e,i,r,s;e="",s=this.option;for(t in s)r=s[t],e+='<option value="'+t+'">'+r+"</option>";return i='<select class="selectpicker" id="'+this.id+'" name="'+this.id+'">'+e+"</select>"},e.prototype.getRadioBox=function(){var t,e,i,r,s,o;r="",e="",this["default"]&&(e=this["default"]),this.val&&(e=this.val),o=this.option;for(i in o)s=o[i],t="",i===e&&(t="checked"),i&&(i=this.id+"-"+i),r+=' <div class="form-group"><div class="input-group input-group-sm">',r+='  <span class="input-group-addon"><input type="radio" name="'+this.id+'" '+t+"></span>",r+='  <span class="form-control" key="'+i+'">'+s+"</span>",r+="</div></div>";return r='<div class="form-inline">'+r+"</div>"},e.prototype.getCheckBox=function(){var t,e,i,r,s,o;i="",o=this.option;for(e in o)r=o[e],s="",this.checked&&(t=this.checked.filter(function(t){return t===e}),t[0]&&(s="checked")),i+=' <div class="form-group"><div class="input-group input-group-sm">',i+='  <span class="input-group-addon"><input type="checkbox" name="'+this.id+'" '+s+"></span>",i+='  <span class="form-control">'+r+"</span>",i+="</div></div>";return i='<div class="form-inline">'+i+"</div>"},e.prototype.getTextarea=function(){var t;return t='<textarea class="form-control input-sm" rows="'+this.rows+'" placeholder="'+this.hint+'">'+this.val+"</textarea>"},e.prototype.getThumbnail=function(){var t;return t="",t+=' <a href="#" class="thumbnail">',t+=' <img src="'+this.src+'" alt="'+this.alt+'" class="img-thumbnail"></a>',t='<div class="col-xs-2 col-md-2" style="margin-right: -20px; margin-bottom:-22px">'+t+"</div>"},e.prototype.makeInput=function(){switch(this.type){case"text":return this.getTextBox();case"select":return this.getDropDownBox();case"radio":return this.getRadioBox();case"check":return this.getCheckBox();case"thumbnail":return this.getThumbnail();case"textarea":return this.getTextarea()}},e}(),e=function(){function e(e){var i;this.FormUtil=new t,this.form=$(e),i=this.form.html(),this.form.html(""),this.form.addClass("panel panel-default"),this.form.append('<div class="panel-heading">'+this.form.attr("title")+"</div>"),this.form.append('<div class="list-group"><li class="list-group-item">'+i+"</li></div>"),this._validate_rules={}}return e.prototype.makeRowForm=function(t){var e,i,r,s,o;for(s=$(t,this.form),o=[],i=0,r=s.length;r>i;i++)e=s[i],e=$(e),e.hasClass("ec-form-col")&&e.wrap('<div class="form-inline"><div class="form-check-item"></div></div>'),e.hasClass("ec-form-row")&&e.attr("class","col-xs-10"),o.push(e.hasClass("ec-form-img")?e.wrap('<div class="row"></div>'):void 0);return o},e.prototype.makeItemForm=function(t){var e,r,s,o,n,a,l,h,c;for(h=$(t,this.form),c=[],a=0,l=h.length;l>a;a++){s=h[a];try{s=$(s),this._makeCheckRules(s),c.push(r=new i(s))}catch(p){e=p,c.push(console.error(e))}finally{(o=s.attr("target"))?(n=$('[key="'+o+'"]'),n.html(r.makeInput()),n.contents().unwrap()):s.parent().hasClass("ec-form-col")?s.wrap('<div class="form-group">'+r.makeInput()+"</div>"):(s.wrap('<div class="form-check-item"></div>'),s.wrap(r.makeInput())),s.detach()}}return c},e.prototype._makeCheckRules=function(t){var e,i,r,s,o;if(s=t.attr("rules"))return(e=this.FormUtil.convJSON(s))?(r={},(o=e.req)&&(r.required=!0),(o=e.required)&&(r.required=!0),(o=e.minlength)&&(r.minlength=o),(o=e.maxlength)&&(r.maxlength=o),(o=e.equalTo)&&(r.equalTo=o),(o=e.email)&&(r.email=o),(o=e.url)&&(r.url=o),("number"===e.type||"num"===e.type)&&(r.number=!0),"date"===e.type&&(r.date=!0),"url"===e.type&&(r.url=!0),"code"===e.type&&(r.ec_code=!0),"digits"===e.type||"dig"===e.type?(r.digits=!0,(o=e.min)&&(r.min=Number(o)),(o=e.max)&&(r.max=Number(o))):((o=e.max)&&(r.maxlength=o),(o=e.min)&&(r.minlength=o)),i=t.attr("id"),this._validate_rules[i]=r):void 0},e.prototype.getCheckRules=function(){return this._validate_rules},e}(),t=function(){function t(){}return t.prototype.convJSON=function(t){var e,i,r,s,o,n,a,l,h,c,p,d,u,m;if(!t)return"";try{if(n=jQuery.parseJSON(t))return n}catch(f){if(e=f,o="",t=t.replace(/[\[\]{}\"\']/g,""),t.match(/:/)){for(u=t.split(","),i=h=0,p=u.length;p>h;i=++h){for(a=u[i],l="",m=a.split(":"),s=c=0,d=m.length;d>c;s=++c)r=m[s],s>0&&(l+=":"),l+='"'+r+'"';i>0&&(o+=","),o+=l}return o="{"+o+"}",jQuery.parseJSON(o)}return t.split(",")}},t}()}).call(this);