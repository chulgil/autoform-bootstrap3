(function(){var FormUtil,MakeFormFactory,MakeInputBox;$(function(){var t,e,i,r,o,s,n;for(o={},t=$("div.ec-auto-form"),s=0,n=t.length;n>s;s++)i=t[s],r=new MakeFormFactory(i),r.makeRowForm("span"),r.makeItemForm("p"),(e=r.getCheckRules())&&(o=$.extend({},o,e)),$(i).removeClass("ec-auto-form");return $("#form1").validate({rules:o,highlight:function(t){return $(t).closest(".form-check-item").addClass("has-error"),"bootstrap-drop hide"===$(t).attr("class")?$(t).closest(".dropdown").find("button").attr("style","color:#933132"):void 0},unhighlight:function(t){return $(t).closest(".form-check-item").removeClass("has-error"),"bootstrap-drop hide"===$(t).attr("class")?$(t).closest(".dropdown").find("button").removeAttr("style"):void 0},errorElement:"span",errorClass:"help-block",errorPlacement:function(t,e){return t.insertAfter(e.parents(".form-inline").length?e.parents(".form-inline")[0]:e.parent(".input-group").length?e.parent():e)},invalidHandler:function(t,e){var i;return console.log("dsf"),e.numberOfInvalids()&&(i=e.errorList[0].element,"bootstrap-drop hide"===$(i).attr("class"))?$(i).closest(".dropdown").find("button").focus():void 0},submitHandler:function(t){return t}}),$.validator.addMethod("ec_code",function(t){return t.match(/[^A-Za-z0-9_-]/g)?!1:!0},"영숫자를 입력하세요.(_-포함가능)"),t.on("click",".dropdown-menu li",function(t){var e;return e=$(t.currentTarget),e.closest(".dropdown").find('[data-bind="label"]').text(e.text()).end().children(".dropdown-toggle").dropdown("toggle"),e.closest(".dropdown").find("input").val(e.attr("key")),e.closest(".dropdown").find("input").focusout()})}),MakeInputBox=function(){function t(t){var e,i;e=t,this.FormUtil=new FormUtil,this.type="",this.id="",this.val="",this.size="",this.option="",this["default"]="",this.hint="",this.target="",this.mark="",this.rows="",this.src="",this.alt="",(i=e.attr("type"))&&(this.type=i),(i=e.attr("id"))&&(this.id=i),(i=e.attr("val"))&&(this.val=i),(i=e.attr("size"))&&(this.size=i),(i=e.attr("default"))&&(this["default"]=i),(i=e.attr("hint"))&&(this.hint=i),(i=e.attr("target"))&&(this.target=i),(i=e.attr("option"))&&(this.option=i),(i=e.attr("mark"))&&(this.mark=i),(i=e.attr("rows"))&&(this.rows=i),(i=e.attr("src"))&&(this.src=i),(i=e.attr("alt"))&&(this.alt=i),this._checkPram(e)}return t.prototype._checkPram=function(t){var e,i;try{if(i=t.context.outerHTML,!this.type)throw"INPUTBOX를 생성할 TYPE이 지정되지 않았습니다."+i;if(!this.id)throw"INPUTBOX를 생성할 ID가 지정되지 않았습니다."+i;if("validator"===this.type)return!1;if("select"===this.type||"radio"===this.type||"check"===this.type){if(!this.option)throw this.type+" BOX를 생성할 OPTION이 지정되지 않았습니다.";if(this.option=this.FormUtil.convJSON(this.option),"object"==typeof this.selected)throw this.type+" BOX OPTION의 JSON형식에 오브젝트배열이 있습니다. :"}if("check"===this.type&&(this["default"]&&(this.checked=this.FormUtil.convJSON(this["default"])),this.val))return this.checked=this.FormUtil.convJSON(this.val)}catch(r){throw e=r,"자동완성입력폼 TAG : "+e.toString()}},t.prototype.getTextBox=function(){var t;return t="",t+='<input id="'+this.id+'" name="'+this.id+'" value="'+this.val+'" type="text" ',this.size&&(t+=' size="'+this.size+'"'),t+=' class="form-control" placeholder="'+this.hint+'" >',this.mark?(t='<span class="input-group-addon">'+this.mark+"</span>"+t,t='<div class="input-group input-group-sm">'+t+"</div>"):t='<div class="input-group-sm">'+t+"</div>",t},t.prototype.getDropDownBox=function(){var t,e,i,r,o,s,n;o="",e="",i="",r=this.selected,this.val?i=this.val:(i=this["default"],r=this.option[i]),n=this.option;for(t in n)s=n[t],e+='<li key="'+t+'"><a href="#0">'+s+"</a></li>";return o+='<div class="dropdown">',o+='<button class="btn btn-default btn-sm dropdown-toggle " type="button" data-toggle="dropdown">',o+='<span data-bind="label">'+r+'</span><span class="caret"></span></button>',o+='<ul class="dropdown-menu" role="menu">'+e+"</ul>",o+='<input type="text" id="'+this.id+'" class="bootstrap-drop hide" name="'+this.id+'" value="'+i+'"/></div>',o='<div class="form-group"><div class="input-group input-group-sm" >'+o+"</div></div>"},t.prototype.getSelectBox=function(){var t,e,i,r,o;e="",o=this.option;for(t in o)r=o[t],e+='<option value="'+t+'">'+r+"</option>";return i='<select class="selectpicker" id="'+this.id+'" name="'+this.id+'">'+e+"</select>"},t.prototype.getRadioBox=function(){var t,e,i,r,o,s;r="",e="",this["default"]&&(e=this["default"]),this.val&&(e=this.val),s=this.option;for(i in s)o=s[i],t="",i===e&&(t="checked"),i&&(i=this.id+"-"+i),r+=' <div class="form-group"><div class="input-group input-group-sm">',r+='  <span class="input-group-addon"><input type="radio" name="'+this.id+'" '+t+"></span>",r+='  <span class="form-control" key="'+i+'">'+o+"</span>",r+="</div></div>";return r='<div class="form-inline">'+r+"</div>"},t.prototype.getCheckBox=function(){var t,e,i,r,o,s,n,a;r="",n=this.option;for(e in n){if(o=n[e],s="",this.checked){a=this.checked;for(i in a)t=a[i],t===e&&(s="checked")}r+=' <div class="form-group"><div class="input-group input-group-sm">',r+='  <span class="input-group-addon"><input type="checkbox" name="'+this.id+'" '+s+"></span>",r+='  <span class="form-control">'+o+"</span>",r+="</div></div>"}return r='<div class="form-inline">'+r+"</div>"},t.prototype.getTextarea=function(){var t;return t='<textarea class="form-control input-sm" rows="'+this.rows+'" placeholder="'+this.hint+'">'+this.val+"</textarea>"},t.prototype.getThumbnail=function(){var t;return t="",t+=' <a href="#" class="thumbnail">',t+=' <img src="'+this.src+'" alt="'+this.alt+'" class="img-thumbnail"></a>',t='<div class="col-xs-2 col-md-2" style="margin-right: -20px; margin-bottom:-22px">'+t+"</div>"},t.prototype.makeInput=function(){switch(this.type){case"text":return this.getTextBox();case"select":return this.getDropDownBox();case"radio":return this.getRadioBox();case"check":return this.getCheckBox();case"thumbnail":return this.getThumbnail();case"textarea":return this.getTextarea()}},t}(),MakeFormFactory=function(){function t(t){var e;this.FormUtil=new FormUtil,this.form=$(t),e=this.form.html(),this.form.html(""),this.form.addClass("panel panel-default"),this.form.append('<div class="panel-heading">'+this.form.attr("title")+"</div>"),this.form.append('<div class="list-group"><li class="list-group-item">'+e+"</li></div>"),this._validate_rules={}}return t.prototype.makeRowForm=function(t){var e,i,r,o,s;for(o=$(t,this.form),s=[],i=0,r=o.length;r>i;i++)e=o[i],e=$(e),e.hasClass("ec-form-col")&&e.wrap('<div class="form-inline"><div class="form-check-item"></div></div>'),e.hasClass("ec-form-row")&&e.attr("class","col-xs-10"),s.push(e.hasClass("ec-form-img")?e.wrap('<div class="row"></div>'):void 0);return s},t.prototype.makeItemForm=function(t){var e,i,r,o,s,n,a,l,p;for(l=$(t,this.form),p=[],n=0,a=l.length;a>n;n++){r=l[n];try{r=$(r),this._makeCheckRules(r),i=new MakeInputBox(r),(o=r.attr("target"))?(s=$('[key="'+o+'"]'),s.html(i.makeInput()),p.push(s.contents().unwrap())):r.parent().hasClass("ec-form-col")?(r.wrap('<div class="form-group"></div>'),p.push(r.parent().append(i.makeInput()))):(r.wrap('<div class="form-check-item"></div>'),p.push(r.parent().append(i.makeInput())))}catch(h){e=h,p.push(console.error(":"+e))}finally{r.detach()}}return p},t.prototype._makeCheckRules=function(t){var e,i,r,o,s;if(o=t.attr("rules"))return(e=this.FormUtil.convJSON(o))?(r={},(s=e.req)&&(r.required=!0),(s=e.required)&&(r.required=!0),(s=e.minlength)&&(r.minlength=s),(s=e.maxlength)&&(r.maxlength=s),(s=e.equalTo)&&(r.equalTo=s),(s=e.email)&&(r.email=s),(s=e.url)&&(r.url=s),("number"===e.type||"num"===e.type)&&(r.number=!0),"date"===e.type&&(r.date=!0),"url"===e.type&&(r.url=!0),"code"===e.type&&(r.ec_code=!0),"digits"===e.type||"dig"===e.type?(r.digits=!0,(s=e.min)&&(r.min=Number(s)),(s=e.max)&&(r.max=Number(s))):((s=e.max)&&(r.maxlength=s),(s=e.min)&&(r.minlength=s)),i=t.attr("id"),this._validate_rules[i]=r):void 0},t.prototype.getCheckRules=function(){return this._validate_rules},t}(),FormUtil=function(){function FormUtil(){}return FormUtil.prototype.convJSON=function(text){var e,i,item,j,json_string,obj,row,temp,_i,_j,_len,_len1,_ref,_ref1;if(!text)return"";try{if(obj=JSON.stringify(eval("("+text+")")),obj=JSON.parse(obj))return obj}catch(_error){if(e=_error,json_string="",text=text.replace(/[\[\]{}\"\']/g,""),text.match(/:/)){for(_ref=text.split(","),i=_i=0,_len=_ref.length;_len>_i;i=++_i){for(row=_ref[i],temp="",_ref1=row.split(":"),j=_j=0,_len1=_ref1.length;_len1>_j;j=++_j)item=_ref1[j],j>0&&(temp+=":"),temp+='"'+item+'"';i>0&&(json_string+=","),json_string+=temp}return json_string="{"+json_string+"}",obj=JSON.stringify(eval("("+json_string+")")),JSON.parse(obj)}return text.split(",")}},FormUtil}()}).call(this);